<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<title>Ccache &mdash; Storage helpers</title>
<meta name="viewport" content="width=device-width, initial-scale=1">
<link rel="stylesheet" href="ccache.css">
</head>
<body>
<header>
<div class="container">
<h1>
<a href="/">
<span style="font-size: 150%; ">Ccache</span> &mdash; a fast C/C++ compiler cache
</a>
</h1>
<button class="sidebar-toggle" aria-label="Toggle menu">â˜°</button>
</div>
</header>
<div class="layout">
<div class="overlay"></div>
<aside class="sidebar">
<nav>
<ul>
<li>
<a href="/">Overview</a>
</li>
<li>
<a href="/download.html">Download</a>
</li>
<li>
<a href="/documentation.html">Documentation</a>
<ul>
<li>
<a href="/platform-compiler-language-support.html">Supported platforms and compilers</a>
</li>
<li>
<a class="current" href="/storage-helpers.html">Storage helpers</a>
</li>
<li>
<a href="/performance.html">Performance</a>
</li>
</ul>
</li>
<li>
<a href="/contribution.html">Contribution</a>
<ul>
<li>
<a href="/bugs.html">Bug report</a>
</li>
<li>
<a href="/repo.html">Source repository</a>
</li>
<li>
<a href="https://github.com/ccache/ccache/discussions">Discussions</a>
</li>
<li>
<a href="https://lists.samba.org/mailman/listinfo/ccache/">Mailing list</a>
</li>
</ul>
</li>
<li>
<a href="/news.html">News</a>
</li>
<li>
<a href="/credits.html">Credits</a>
</li>
<li>
<a href="/license.html">License</a>
</li>
</ul>
</nav>
</aside>
<main class="content">
<h1>Storage helpers</h1>
<img src="storage-helpers.svg" size="600" alt="ccache <-> storage helper <-> remote storage server" />
<p>
To communicate with remote storage servers in an efficient way, ccache spawns
a long-lived local helper process that can keep connections alive, thus
amortizing the session setup cost. The helper process is shared by all ccache
processes that use the same
<a href="https://github.com/ccache/ccache/blob/master/doc/manual.adoc#remote-storage-backends">remote
storage settings</a>.
</p>
<p>
<b>NOTE:</b> Support for storage helpers will be available in ccache version
4.13+: <a href="https://github.com/ccache/ccache/pull/1672">PR #1672</a>.
</p>
<h2>Available storage helpers</h2>
<table>
<tr>
<th>Protocol(s)</th>
<th>Project</th>
<th>Notes</th>
</tr>
<tr>
<td><code>http</code>, <code>https</code></td>
<td><a href="https://github.com/ccache/ccache-storage-http-cpp">ccache/ccache-storage-http-cpp</a></td>
<td>Reference implementation (C++)</td>
</tr>
<tr>
<td><code>http</code>, <code>https</code></td>
<td><a href="https://github.com/ccache/ccache-storage-http-go">ccache/ccache-storage-http-go</a></td>
<td>Reference implementation (Go), prebuilt binaries available</td>
</tr>
</table>
<p>
Have you implemented a storage helper and want it to be listed above? Great!
<a href="https://github.com/ccache/ccache.github.io/issues/new">Open an
issue</a>, or maybe even create a pull request yourself for
the <a href="https://github.com/ccache/ccache.github.io">web site
repository</a>.
</p>
<h2>Basic usage</h2>
<ol>
<li>
Install a helper for the protocol you want (e.g. <code>http</code>) in a
<a href="https://github.com/ccache/ccache/blob/master/doc/manual.adoc#storage-helper-process">location
where ccache looks for helper programs</a>. Ccache will start the helper
automatically when needed.
</li>
<li>
Set <code>CCACHE_REMOTE_STORAGE</code> (or
<a href="https://github.com/ccache/ccache/blob/master/doc/manual.adoc#config_remote_storage"><code>remote_storage</code></a>
in ccache's configuration file) to the URL of the remote storage server,
e.g. <code>http://example.com/cache</code>.
</li>
</ol>
<h2>Documentation</h2>
<ul>
<li><a href="https://github.com/ccache/ccache/blob/master/doc/manual.adoc#remote-storage-backends">Remote storage configuration</a></li>
<li><a href="https://github.com/ccache/ccache/blob/master/doc/remote_storage_helper_spec.md">Remote storage helper specification</a></li>
</ul>
<h2>Starting a helper explicitly</h2>
<p>
A storage helper is usually started automatically by ccache when needed.
However, it is possible to start the helper explicitly, for instance when
developing or debugging a storage helper, or in custom deployment scenarios
where the helper service is managed externally. Example:
</p>
<pre>
export CRSH_IPC_ENDPOINT=/tmp/ccache-example.sock   # On Linux/POSIX
export CRSH_IPC_ENDPOINT=ccache-example-pipe        # On Windows
export CRSH_URL=http://example.com/cache
ccache-storage-http
</pre>
<p>
Ccache can then be told to connect to the IPC endpoint using the
<a href="https://github.com/ccache/ccache/blob/master/doc/manual.adoc#crsh-storage-backend">CRSH
backend</a>:
</p>
<pre>
export CCACHE_REMOTE_STORAGE=crsh:/tmp/ccache-example.sock   # On Linux/POSIX
export CCACHE_REMOTE_STORAGE=crsh:ccache-example-pipe        # On Windows
</pre>
</main>
</div> <!-- layout -->
<script>
const sidebar = document.querySelector(".sidebar");
const overlay = document.querySelector(".overlay");
const toggle = document.querySelector(".sidebar-toggle");
toggle.addEventListener("click", () => {
sidebar.classList.toggle("show");
overlay.classList.toggle("show");
});
overlay.addEventListener("click", () => {
sidebar.classList.remove("show");
overlay.classList.remove("show");
});
</script>
</body>
</html>
